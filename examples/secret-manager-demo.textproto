# Secret Manager Demo Configuration
# This example shows how to create secrets from environment variables and GitHub secrets

project {
  id: "secret-manager-demo-123"
  name: "Secret Manager Demo"
  billing_account: "123456-ABCDEF-GHIJKL"
  apis: [GCP_API_SECRET_MANAGER, GCP_API_IAM]
}

secret_manager {
  secrets {
    name: "database-password"
    from_env_var: "DB_PASSWORD"
    labels: {
      key: "environment"
      value: "production"
    }
    labels: {
      key: "type" 
      value: "database-credential"
    }
    replication {
      automatic {
        # Uses automatic replication across all regions
      }
    }
  }
  
  secrets {
    name: "api-key"
    from_github_secret: "API_KEY"
    labels: {
      key: "environment"
      value: "production"
    }
    labels: {
      key: "type"
      value: "external-api" 
    }
    replication {
      user_managed {
        replicas {
          location: REGION_US_CENTRAL1
        }
        replicas {
          location: REGION_US_EAST1
        }
      }
    }
  }
  
  secrets {
    name: "jwt-signing-key"
    base64_value: "LS0tLS1CRUdJTiBQUklWQVRFIEtFWS0tLS0t"
    labels: {
      key: "environment"
      value: "production"
    }
    labels: {
      key: "type"
      value: "signing-key"
    }
    ttl: "2628000s" # 30 days
    version_aliases: ["latest", "stable"]
  }
  
  secrets {
    name: "service-config"
    plain_text: "{\"debug\": false, \"log_level\": \"info\"}"
    labels: {
      key: "environment"
      value: "production"
    }
    labels: {
      key: "type"
      value: "configuration"
    }
    annotations: {
      key: "purpose"
      value: "application-config"
    }
    annotations: {
      key: "team"
      value: "backend"
    }
  }
}